import{A as k,B as Ae,b as G,g as Be,h as Ve,i as Le,j as $e,l as _e,m as H,n as d,o as T,p as O,q as P,r as B,s as V,t as te,u as W,v as J,w as K,x as L,y as $,z as ce}from"./chunk-3NVM47Q4.js";import{$ as w,$a as m,Aa as c,Jb as me,Kb as Ce,Lb as pe,Mb as F,N as X,O as ee,Qa as A,R as U,Rb as ve,Sa as h,Ua as ae,Va as j,Wa as x,X as p,Xa as y,Ya as M,Za as o,_a as a,a as ke,ab as R,b as De,ba as Ie,bb as u,cb as v,db as q,e as le,eb as s,f as Ee,fb as g,gb as D,ha as _,ia as b,ib as E,ja as S,jb as Oe,ka as N,kb as de,l as Q,lb as ne,mb as oe,pa as Ne,t as C,tb as z,xa as Te,xb as Pe}from"./chunk-F36XKKPI.js";var je=[{icon:"../../../../assets/icons/users-group.svg",name:"Gesti\xF3n del Personal",items:[{name:"Usuarios del Sistema",path:"./users"},{name:"Control de Dependientes",path:"./dependents"},{name:"Control de Trabajadores",path:"./workers"}]},{icon:"../../../../assets/icons/products.svg",name:"Gesti\xF3n de Productos",items:[{name:"Clasificaciones",path:""},{name:"Almacenes",path:""},{name:"Productos",path:"products"},{name:"Ofertas a la Venta",path:""}]},{icon:"../../../../assets/icons/world.svg",name:"Datos Globales",items:[{name:"Registro de Entidades",path:"./entities"},{name:"Utensilios",path:""},{name:"Activos Fijos",path:""},{name:"Cuentas Contables",path:""},{name:"Comprobantes",path:""}]},{icon:"../../../../assets/icons/opes.svg",name:"Operaciones",items:[{name:"Emisi\xF3n de Comandas",path:"./sales"}]}];var it=r=>[r];function nt(r,i){if(r&1&&(o(0,"li",9),s(1),a()),r&2){let l=i.$implicit;h("routerLink",Oe(2,it,l.path)),c(),g(l.name)}}function ot(r,i){if(r&1){let l=R();o(0,"div",1)(1,"div",3)(2,"button",4),u("click",function(t){_(l);let n=v();return b(n.toggleAccordion(t))}),o(3,"span",5),m(4,"img",6),s(5),a(),o(6,"span",7),s(7,"\u25BC"),a()(),o(8,"div",8)(9,"ul"),y(10,nt,2,4,"li",9,x),a()()()()}if(r&2){let l=i.$implicit;c(4),q("alt",l.icon.split("/")[3]),h("src",l.icon,Te),c(),D(" ",l.name," "),c(5),M(l.items)}}var Re=(()=>{let i=class i{constructor(){this.manu_items=je}ngAfterViewInit(){this.addClicked()}addClicked(){let e=document.querySelectorAll("main nav div");function t(){e.forEach(n=>{n.classList.remove("clicked")}),this.classList.add("clicked")}e.forEach(n=>{n.addEventListener("click",t)})}toggleAccordion(e){let t=e.target.closest(".accordion-item"),n=t.querySelector(".accordion-content"),f=t.querySelector(".accordion-icon"),re=n.clientHeight!==0;n.style.maxHeight=re?"":`${n.scrollHeight}px`,f.textContent=re?"\u25BC":"\u25B2"}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-dashboard-layout"]],standalone:!0,features:[E],decls:6,vars:0,consts:[[1,"left"],[1,"accordion"],[1,"right"],[1,"accordion-item"],[1,"accordion-button",3,"click"],[2,"display","flex","align-items","center","gap","10px"],["width","20px",3,"src","alt"],[1,"accordion-icon"],[1,"accordion-content"],[3,"routerLink"]],template:function(t,n){t&1&&(o(0,"main")(1,"div",0),y(2,ot,12,3,"div",1,x),a(),o(4,"div",2),m(5,"router-outlet"),a()()),t&2&&(c(2),M(n.manu_items))},dependencies:[F,_e,Ve,$e],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100vh}.left[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#2e2559;width:25%;height:100%;padding:20px 30px;overflow-y:auto}.right[_ngcontent-%COMP%]{width:75%;height:100%;padding:20px 30px}.accordion-item[_ngcontent-%COMP%]{margin-bottom:10px}.accordion-button[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:none;color:inherit;border:none;text-align:left;width:100%;color:#ebeaef;font-size:16px;cursor:pointer}.nav-item[_ngcontent-%COMP%]:hover, .nav-item.clicked[_ngcontent-%COMP%]{color:#fff;border-left:1px solid white}.accordion-button[_ngcontent-%COMP%]:focus{outline:none}.accordion-icon[_ngcontent-%COMP%]{float:right;display:flex;align-items:center;justify-content:center;border-radius:50px;height:30px;width:30px}.accordion-icon[_ngcontent-%COMP%]:hover{background-color:#303030}.accordion-content[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .2s ease-out}.accordion-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0 20px;margin:0}.accordion-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#ebeaef;cursor:pointer;padding:8px 0 8px 10px;margin-bottom:10px;border-radius:10px;transition:background-color .2s}.accordion-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#fff;background-color:#504973}.accordion-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.accordion-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{margin-top:10px}"],changeDetection:0});let r=i;return r})();var he=le(ce());var Ue=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/users`}getAllUsers(){return this.http.get(this.url).pipe(C(e=>e.data))}getUserById(e){return this.http.get(`${this.url}/${e}`).pipe(C(t=>t.data))}saveUser(e){return this.http.post(this.url,e)}changeActive(e){return this.http.post(`${this.url}/changeActive`,e).pipe(C(t=>t.success===!0))}editUser(e,t){return this.http.put(`${this.url}/${e}`,t).pipe(C(n=>n.success===!0))}deleteUserById(e){return this.http.delete(`${this.url}/${e}`).pipe(C(t=>t.success===!0))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var Y=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["shared-loading-data"]],standalone:!0,features:[E],decls:5,vars:0,consts:[[1,"empty-list",2,"display","flex","align-items","center","justify-content","center","gap","30px","height","100%","margin-top","50px"],["width","300","height","300","priority","high","ngSrc","../../../assets/images/loadin-info.webp","alt","Cargando Informaci\xF3n"],[2,"width","400px"],[2,"text-align","center","font-size","18px"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"img",1),o(2,"span",2)(3,"p",3),s(4," Estamos buscando la informaci\xF3n para mostrarle. Espere unos segundos por favor "),a()()())},dependencies:[ve,F]});let r=i;return r})();var Z=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["shared-empty-list"]],standalone:!0,features:[E],decls:5,vars:0,consts:[[1,"empty-list",2,"display","flex","align-items","center","justify-content","center","gap","30px","height","100%","margin-top","50px"],["width","300","height","300","priority","high","ngSrc","../../../assets/images/empty-list.webp","alt","Lista Vac\xEDa"],[2,"width","500px","display","flex","align-items","center","flex-direction","column"],[2,"text-align","center","font-size","18px"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"img",1),o(2,"span",2)(3,"p",3),s(4," Parece que no hay productos en el almac\xE9n. Para crear el primero pinche el bot\xF3n "),a()()())},dependencies:[ve,F,_e],styles:[".btn-empty-list[_ngcontent-%COMP%]{padding:8px;border-radius:10px;cursor:pointer;width:200px;border:none;display:flex;align-items:center;justify-content:center;margin-top:20px;background-color:#2262c6;color:#fff;gap:10px}.btn-empty-list[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #00000080}"]});let r=i;return r})();var rt=(r,i)=>({active:r,inactive:i});function at(r,i){if(r&1&&(o(0,"option",7),s(1),a()),r&2){let l=i.$implicit;q("value",l[0]),c(),D(" ",l[0]," ")}}function st(r,i){if(r&1){let l=R();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td")(8,"span",10),s(9),a()(),o(10,"td")(11,"div",11)(12,"button",12),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.changeActive(t))}),S(),o(13,"svg",13),m(14,"path",14)(15,"path",15)(16,"path",16)(17,"path",17)(18,"path",18),a()(),N(),o(19,"button",19),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t))}),S(),o(20,"svg",20),m(21,"path",14)(22,"path",21)(23,"path",22)(24,"path",23),a()(),N(),o(25,"button",24),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.deleteUser(t.ID))}),S(),o(26,"svg",25),m(27,"path",14)(28,"path",26)(29,"path",27)(30,"path",28)(31,"path",29)(32,"path",30),a()()()()()}if(r&2){let l=i.$implicit;c(2),g(l.Nombre),c(2),g(l.Cargo),c(2),g(l.Correo),c(2),h("ngClass",de(5,rt,l.Activo,!l.Activo)),c(),D(" ",l.Activo?"Activo":"Inactivo"," ")}}function lt(r,i){if(r&1&&(o(0,"table")(1,"caption"),s(2," Todos los Usuarios "),a(),o(3,"thead")(4,"tr")(5,"th"),s(6,"Nombre"),a(),o(7,"th"),s(8,"Cargo que Desempe\xF1a"),a(),o(9,"th"),s(10,"Correo Electr\xF3nico"),a(),o(11,"th"),s(12,"Estado"),a(),o(13,"th"),s(14,"Acciones"),a()()(),o(15,"tbody"),y(16,st,33,8,"tr",null,x),a()()),r&2){let l=v();c(16),M(l.userList)}}function ct(r,i){r&1&&m(0,"shared-loading-data")}function dt(r,i){r&1&&m(0,"shared-empty-list")}var Ge=(()=>{let i=class i{constructor(){this.destroy$=new Q,this.userService=p(Ue),this.fb=p(K),this.cdRef=p(z),this.loading_data=!0,this.roles=k.roles,this.roles_list=Object.entries(this.roles),this.userList=[],this.userForm=this.fb.group({Nombre:["",[d.required,d.minLength(3)]],ClaveAcceso:["",[d.required,d.minLength(5)]],NivelAcceso:[10,d.required],Cargo:["Invitado",[d.required,d.minLength(5)]],Correo:["",[d.required,d.minLength(5)]]})}ngOnInit(){this.refreshUserList()}onSubmit(){he.default.fire({title:"Est\xE1s seguro?",text:"Desea crear un usuario con la informaci\xF3n antes brindada?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(e=>{e.isConfirmed&&this.userService.saveUser(this.userForm.value).subscribe(t=>{if(!t.success){he.default.fire("Registro de Usuarios",t.api_message,"error");return}this.userForm.reset(),this.refreshUserList()})})}changeActive(e){he.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n cambiar\xE1 el acceso al sistema de este usuario.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, c\xE1mbialo!"}).then(t=>{if(t.isConfirmed){let n={ID:e.ID};this.userService.changeActive(n).subscribe(f=>{f&&this.refreshUserList()})}})}deleteUser(e){he.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n eliminar\xE1 por completo al usuario del sistema.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(t=>{t.isConfirmed&&this.userService.deleteUserById(e).subscribe(n=>{n&&this.refreshUserList()})})}refreshUserList(){this.userService.getAllUsers().pipe(X(this.destroy$)).subscribe(e=>{e.length!==0?(this.loading_data=!1,this.userList=e):this.loading_data=void 0,this.cdRef.detectChanges()})}onChangeCat(){let e=document.getElementById("role-types"),t=Object.entries(this.roles).find(([n])=>n===e.value)[1];this.userForm.controls.NivelAcceso.setValue(t),this.userForm.controls.Cargo.setValue(e.value)}putTuEdit(e){this.userForm.controls.Nombre.setValue(e.Nombre),this.userForm.controls.Correo.setValue(e.Correo),this.userForm.controls.Cargo.setValue(e.Cargo)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-user-manager"]],standalone:!0,features:[E],decls:21,vars:2,consts:[[1,"form"],[2,"display","flex","justify-content","space-between"],[3,"click"],[3,"formGroup"],["formControlName","Nombre","placeholder","Nombre",1,"nonNum"],["formControlName","ClaveAcceso","placeholder","Clave de Acceso"],["value","Invitado","id","role-types",3,"change"],[3,"value"],["formControlName","Correo","placeholder","Direcci\xF3n de Correo Electr\xF3nico"],[1,"table-widget"],[3,"ngClass"],[1,"actions"],["title","Cambiar acceso al sistema",1,"btn-act","change",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-replace"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M3 3m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"],["d","M15 15m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"],["d","M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"],["d","M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"],[1,"btn-act","edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-edit"],["d","M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"],["d","M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"],["d","M16 5l3 3"],[1,"btn-act","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-trash"],["d","M4 7l16 0"],["d","M10 11l0 6"],["d","M14 11l0 6"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(t,n){t&1&&(o(0,"h1"),s(1,"Usuarios del Sistema"),a(),o(2,"span",0)(3,"span",1)(4,"h3"),s(5,"Manejar Informaci\xF3n"),a(),o(6,"button",2),u("click",function(){return n.onSubmit()}),s(7,"Guardar"),a()(),o(8,"form",3)(9,"span"),m(10,"input",4)(11,"input",5),a(),o(12,"span")(13,"select",6),u("change",function(){return n.onChangeCat()}),y(14,at,2,2,"option",7,x),a(),m(16,"input",8),a()()(),o(17,"section",9),A(18,lt,18,0,"table")(19,ct,1,0,"shared-loading-data")(20,dt,1,0,"shared-empty-list"),a()),t&2&&(c(8),h("formGroup",n.userForm),c(6),M(n.roles_list),c(4),j(n.loading_data===!1?18:n.loading_data===!0?19:n.loading_data===void 0?20:-1))},dependencies:[$,P,W,J,H,T,O,B,V,Y,Z,F,me,L],encapsulation:2});let r=i;return r})();var fe=le(ce());var be=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/dependents`}getAllDependents(){return this.http.get(this.url).pipe(C(e=>e.data))}getDependentById(e){return this.http.get(`${this.url}/${e}`).pipe(C(t=>t.data))}saveDependent(e){return this.http.post(this.url,e)}changeActive(e){return this.http.post(`${this.url}/changeActive`,e).pipe(C(t=>t.success===!0))}editDependent(e,t){return this.http.put(`${this.url}/${e}`,t).pipe(C(n=>n.success===!0))}deleteDependentById(e){return this.http.delete(`${this.url}/${e}`).pipe(C(t=>t.success===!0))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var ie=(()=>{let i=class i{constructor(){this.elementRef=p(Ne)}preventCharacterInput(e){let t=this.elementRef.nativeElement;t.classList.contains("nonNum")&&!Number.isNaN(Number(e.key))&&e.preventDefault(),e.key!=="."&&t.classList.contains("onlyNum")&&Number.isNaN(Number(e.key))&&e.preventDefault()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ie({type:i,selectors:[["","characterDetect",""]],hostBindings:function(t,n){t&1&&u("keypress",function(re){return n.preventCharacterInput(re)})},standalone:!0});let r=i;return r})();var mt=(r,i)=>({active:r,inactive:i});function pt(r,i){if(r&1){let l=R();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td")(6,"span",8),s(7),a()(),o(8,"td")(9,"div",9)(10,"button",10),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.changeActive(t))}),S(),o(11,"svg",11),m(12,"path",12)(13,"path",13)(14,"path",14)(15,"path",15)(16,"path",16),a()(),N(),o(17,"button",17),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t))}),S(),o(18,"svg",18),m(19,"path",12)(20,"path",19)(21,"path",20)(22,"path",21),a()(),N(),o(23,"button",22),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.deleteDependent(t.Id))}),S(),o(24,"svg",23),m(25,"path",12)(26,"path",24)(27,"path",25)(28,"path",26)(29,"path",27)(30,"path",28),a()()()()()}if(r&2){let l=i.$implicit;c(2),g(l.Nombre),c(2),g(l.IdAreaEntidad),c(2),h("ngClass",de(4,mt,l.Activo,!l.Activo)),c(),D(" ",l.Activo?"Activo":"Inactivo"," ")}}function ut(r,i){if(r&1&&(o(0,"table")(1,"caption"),s(2," Todos los Dependientes "),a(),o(3,"thead")(4,"tr")(5,"th"),s(6,"Nombre"),a(),o(7,"th"),s(8,"\xC1rea Vinculada"),a(),o(9,"th"),s(10,"Estado"),a(),o(11,"th"),s(12,"Acciones"),a()()(),o(13,"tbody"),y(14,pt,31,7,"tr",null,x),a()()),r&2){let l=v();c(14),M(l.dependentsList)}}function ht(r,i){r&1&&m(0,"shared-loading-data")}function ft(r,i){r&1&&m(0,"shared-empty-list")}var qe=(()=>{let i=class i{constructor(){this.destroy$=new Q,this.userService=p(be),this.fb=p(K),this.cdRef=p(z),this.loading_data=!0,this.roles=k.roles,this.roles_list=Object.entries(this.roles),this.dependentsList=[],this.dependentForm=this.fb.group({IdAreaEntidad:["",[d.required,d.minLength(3)]],Nombre:["",[d.required,d.minLength(5)]],Activo:[10,d.required]})}ngOnInit(){this.refreshDependentList()}onSubmit(){fe.default.fire({title:"Est\xE1s seguro?",text:"Desea registrar un dependiente con la informaci\xF3n antes brindada?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(e=>{e.isConfirmed&&this.userService.saveDependent(this.dependentForm.value).subscribe(t=>{if(!t.success){fe.default.fire("Registro de Usuarios",t.api_message,"error");return}this.dependentForm.reset(),this.refreshDependentList()})})}changeActive(e){fe.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n cambiar\xE1 el acceso al sistema de este usuario.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, c\xE1mbialo!"}).then(t=>{if(t.isConfirmed){let n=De(ke({},e),{Activo:!e.Activo});this.userService.changeActive(n).subscribe(f=>{f&&this.refreshDependentList()})}})}deleteDependent(e){fe.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n eliminar\xE1 por completo al usuario del sistema.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(t=>{t.isConfirmed&&this.userService.deleteDependentById(e).subscribe(n=>{n&&this.refreshDependentList()})})}refreshDependentList(){this.userService.getAllDependents().pipe(X(this.destroy$)).subscribe(e=>{e.length!==0?(this.loading_data=!1,this.dependentsList=e):this.loading_data=void 0,this.cdRef.detectChanges()})}onChangeCat(){let e=document.getElementById("role-types"),t=Object.entries(this.roles).find(([n])=>n===e.value)[1];this.dependentForm.controls.NivelAcceso.setValue(t),this.dependentForm.controls.Cargo.setValue(e.value)}putTuEdit(e){this.dependentForm.controls.IdAreaEntidad.setValue(e.IdAreaEntidad),this.dependentForm.controls.Nombre.setValue(e.Nombre),this.dependentForm.controls.Activo.setValue(e.Activo)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-dependents-manager"]],standalone:!0,features:[E],decls:17,vars:2,consts:[[1,"form"],[2,"display","flex","justify-content","space-between"],[3,"click"],[3,"formGroup"],["formControlName","IdEntidad","placeholder","Entidad"],["formControlName","IdAreaEntidad","placeholder","\xC1rea de la Entidad"],["characterDetect","","formControlName","Nombre","placeholder","Nombre del Dependiente"],[1,"table-widget"],[3,"ngClass"],[1,"actions"],["title","Cambiar acceso al sistema",1,"btn-act","change",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-replace"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M3 3m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"],["d","M15 15m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"],["d","M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"],["d","M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"],[1,"btn-act","edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-edit"],["d","M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"],["d","M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"],["d","M16 5l3 3"],[1,"btn-act","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-trash"],["d","M4 7l16 0"],["d","M10 11l0 6"],["d","M14 11l0 6"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(t,n){t&1&&(o(0,"h1"),s(1,"Control de Dependientes"),a(),o(2,"span",0)(3,"span",1)(4,"h3"),s(5,"Manejar Informaci\xF3n"),a(),o(6,"button",2),u("click",function(){return n.onSubmit()}),s(7,"Guardar"),a()(),o(8,"form",3)(9,"span"),m(10,"input",4)(11,"input",5)(12,"input",6),a()()(),o(13,"section",7),A(14,ut,16,0,"table")(15,ht,1,0,"shared-loading-data")(16,ft,1,0,"shared-empty-list"),a()),t&2&&(c(8),h("formGroup",n.dependentForm),c(6),j(n.loading_data===!1?14:n.loading_data===!0?15:n.loading_data===void 0?16:-1))},dependencies:[ie,$,P,H,T,O,B,V,Y,Z,F,me,L],encapsulation:2});let r=i;return r})();var ge=le(ce());var ze=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/workers`}getAllUsers(){return this.http.get(this.url).pipe(C(e=>e.data))}getUserById(e){return this.http.get(`${this.url}/${e}`).pipe(C(t=>t.data))}saveUser(e){return this.http.post(this.url,e)}changeActive(e){return this.http.post(`${this.url}/changeActive`,e).pipe(C(t=>t.success===!0))}editUser(e,t){return this.http.put(`${this.url}/${e}`,t).pipe(C(n=>n.success===!0))}deleteUserById(e){return this.http.delete(`${this.url}/${e}`).pipe(C(t=>t.success===!0))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var gt=(r,i)=>({active:r,inactive:i});function Ct(r,i){if(r&1&&(o(0,"option",10),s(1),a()),r&2){let l=i.$implicit;q("value",l[0]),c(),D(" ",l[0]," ")}}function vt(r,i){if(r&1){let l=R();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td")(8,"span",14),s(9),a()(),o(10,"td")(11,"div",15)(12,"button",16),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.changeActive(t))}),S(),o(13,"svg",17),m(14,"path",18)(15,"path",19)(16,"path",20)(17,"path",21)(18,"path",22),a()(),N(),o(19,"button",23),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t))}),S(),o(20,"svg",24),m(21,"path",18)(22,"path",25)(23,"path",26)(24,"path",27),a()(),N(),o(25,"button",28),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.deleteUser(t.Id))}),S(),o(26,"svg",29),m(27,"path",18)(28,"path",30)(29,"path",31)(30,"path",32)(31,"path",33)(32,"path",34),a()()()()()}if(r&2){let l=i.$implicit;c(2),g(l.Nombre),c(2),g(l.CI),c(2),g(l.IdCargo),c(2),h("ngClass",de(5,gt,l.Activo,!l.Activo)),c(),D(" ",l.Activo?"Activo":"Inactivo"," ")}}function _t(r,i){if(r&1&&(o(0,"table")(1,"caption"),s(2," Todos los Trabajadores "),a(),o(3,"thead")(4,"tr")(5,"th"),s(6,"Nombre"),a(),o(7,"th"),s(8,"Cargo que Desempe\xF1a"),a(),o(9,"th"),s(10,"Correo Electr\xF3nico"),a(),o(11,"th"),s(12,"Estado"),a(),o(13,"th"),s(14,"Acciones"),a()()(),o(15,"tbody"),y(16,vt,33,8,"tr",null,x),a()()),r&2){let l=v();c(16),M(l.userList)}}function bt(r,i){r&1&&m(0,"shared-loading-data")}function St(r,i){r&1&&m(0,"shared-empty-list")}var He=(()=>{let i=class i{constructor(){this.destroy$=new Q,this.workerService=p(ze),this.fb=p(K),this.cdRef=p(z),this.loading_data=!0,this.roles=k.roles,this.roles_list=Object.entries(this.roles),this.userList=[],this.userForm=this.fb.group({CI:["",[d.required,d.minLength(3)]],Nombre:["",[d.required,d.minLength(5)]],IdTipo:["",[d.required,d.minLength(5)]],IdCargo:["",d.required],Telefono:["",[d.required,d.minLength(5)]],Salario:["",[d.required,d.minLength(5)]]})}ngOnInit(){this.refreshUserList()}ngAfterViewInit(){this.addNumberPreventionListener()}onSubmit(){ge.default.fire({title:"Est\xE1s seguro?",text:"Desea crear un usuario con la informaci\xF3n antes brindada?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(e=>{e.isConfirmed&&this.workerService.saveUser(this.userForm.value).subscribe(t=>{if(!t.success){ge.default.fire("Registro de Usuarios",t.api_message,"error");return}this.userForm.reset(),this.refreshUserList()})})}changeActive(e){ge.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n cambiar\xE1 el acceso al sistema de este usuario.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, c\xE1mbialo!"}).then(t=>{if(t.isConfirmed){let n={Id:e.Id};this.workerService.changeActive(n).subscribe(f=>{f&&this.refreshUserList()})}})}deleteUser(e){ge.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n eliminar\xE1 por completo al usuario del sistema.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(t=>{t.isConfirmed&&this.workerService.deleteUserById(e).subscribe(n=>{n&&this.refreshUserList()})})}refreshUserList(){this.workerService.getAllUsers().pipe(X(this.destroy$)).subscribe(e=>{e.length!==0?(this.loading_data=!1,this.userList=e):this.loading_data=void 0,this.cdRef.detectChanges()})}onChangeCat(){let e=document.getElementById("role-types"),t=Object.entries(this.roles).find(([n])=>n===e.value)[1];this.userForm.controls.NivelAcceso.setValue(t),this.userForm.controls.Cargo.setValue(e.value)}putTuEdit(e){this.userForm.controls.CI.setValue(e.CI),this.userForm.controls.Nombre.setValue(e.Nombre),this.userForm.controls.IdTipo.setValue(e.IdTipo),this.userForm.controls.IdCargo.setValue(e.IdCargo),this.userForm.controls.Telefono.setValue(e.Telefono),this.userForm.controls.Salario.setValue(e.Salario)}addNumberPreventionListener(){document.querySelectorAll(".nonNum,.onlyNum").forEach(t=>{t.addEventListener("keypress",n=>{t.classList.contains("nonNum")&&!Number.isNaN(Number(n.key))&&n.preventDefault()})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-workers-manager"]],standalone:!0,features:[E],decls:27,vars:2,consts:[[1,"form"],[2,"display","flex","justify-content","space-between"],[3,"click"],[3,"formGroup"],["characterDetect","","formControlName","CI","placeholder","No. Carnet de Identidad",1,"onlyNum"],["characterDetect","","formControlName","Nombre","placeholder","Nombre y Apellidos",1,"nonNum"],["formControlName","IdTipo","value","Direcci\xF3n","id","clas-types",3,"change"],["value","Direcci\xF3n"],["value","Servicios"],["formControlName","IdCargo","value","Invitado","id","role-types",3,"change"],[3,"value"],["characterDetect","","formControlName","Telefono","placeholder","N\xFAmero de Tel\xE9fono",1,"onlyNum"],["characterDetect","","formControlName","Salario","placeholder","Salario B\xE1sico",1,"onlyNum"],[1,"table-widget"],[3,"ngClass"],[1,"actions"],["title","Cambiar acceso al sistema",1,"btn-act","change",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-replace"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M3 3m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"],["d","M15 15m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"],["d","M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"],["d","M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"],[1,"btn-act","edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-edit"],["d","M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"],["d","M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"],["d","M16 5l3 3"],[1,"btn-act","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-trash"],["d","M4 7l16 0"],["d","M10 11l0 6"],["d","M14 11l0 6"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(t,n){t&1&&(o(0,"h1"),s(1,"Control de Trabajadores"),a(),o(2,"span",0)(3,"span",1)(4,"h3"),s(5,"Manejar Informaci\xF3n"),a(),o(6,"button",2),u("click",function(){return n.onSubmit()}),s(7,"Guardar"),a()(),o(8,"form",3)(9,"span"),m(10,"input",4)(11,"input",5),o(12,"select",6),u("change",function(){return n.onChangeCat()}),o(13,"option",7),s(14,"Direcci\xF3n"),a(),o(15,"option",8),s(16,"Servicios"),a()()(),o(17,"span")(18,"select",9),u("change",function(){return n.onChangeCat()}),y(19,Ct,2,2,"option",10,x),a(),m(21,"input",11)(22,"input",12),a()()(),o(23,"section",13),A(24,_t,18,0,"table")(25,bt,1,0,"shared-loading-data")(26,St,1,0,"shared-empty-list"),a()),t&2&&(c(8),h("formGroup",n.userForm),c(11),M(n.roles_list),c(5),j(n.loading_data===!1?24:n.loading_data===!0?25:n.loading_data===void 0?26:-1))},dependencies:[ie,$,P,W,J,H,te,T,O,B,V,Y,Z,F,me,L],encapsulation:2,changeDetection:0});let r=i;return r})();var Fe=le(ce());var Se=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/dpa`}getAllDPAS(){return this.http.get(this.url).pipe(ee(e=>e.data.sort((t,n)=>t.Nombre.localeCompare(n.Nombre))))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function xt(r,i){if(r&1&&(o(0,"option",15),s(1),ne(2,"titlecase"),a()),r&2){let l=i.$implicit;h("value",l.Nombre),c(),D(" ",oe(2,2,l.Nombre)," ")}}function yt(r,i){r&1&&y(0,xt,3,4,"option",15,x),r&2&&M(i.data)}function Mt(r,i){if(r&1){let l=R();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td")(8,"div",16)(9,"button",17),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t))}),S(),o(10,"svg",18),m(11,"path",19)(12,"path",20)(13,"path",21)(14,"path",22),a()(),N(),o(15,"button",23),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t,!0))}),S(),o(16,"svg",24),m(17,"path",19)(18,"path",25)(19,"path",26)(20,"path",27),a()(),N(),o(21,"button",28),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.deleteEntity(t.Id))}),S(),o(22,"svg",29),m(23,"path",19)(24,"path",30)(25,"path",31)(26,"path",32)(27,"path",33)(28,"path",34),a()()()()()}if(r&2){let l=i.$implicit;c(2),g(l.Nombre),c(2),g(l.Actividad),c(2),g(l.Director)}}function wt(r,i){if(r&1&&(o(0,"table")(1,"caption"),s(2," Todos los Usuarios "),a(),o(3,"thead")(4,"tr")(5,"th"),s(6,"Nombre"),a(),o(7,"th"),s(8,"Actividad"),a(),o(9,"th"),s(10,"Director"),a(),o(11,"th"),s(12,"Acciones"),a()()(),o(13,"tbody"),y(14,Mt,29,3,"tr",null,x),a()()),r&2){let l=v();c(14),M(l.entitiesList)}}function Et(r,i){r&1&&m(0,"shared-loading-data")}function Ft(r,i){r&1&&m(0,"shared-empty-list")}var We=(()=>{let i=class i{constructor(){this.destroy$=new Q,this.loadingData=!0,this.editing=!1,this.entitiesService=p(Ae),this.dpaService=p(Se),this.fb=p(K),this.cdRef=p(z),this.entitiesList=[],this.entityForm=this.fb.group({Id:["",d.required],Codigo:["",d.required],Nombre:["",d.required],Municipio:["",d.required],Direccion:["",d.required],Director:["",d.required],Actividad:["",d.required],Cuenta:["",d.required],NIT:["",d.required],IdDpa:0})}ngOnInit(){this.refreshEntityList(),this.dpaResults$=this.dpaService.getAllDPAS()}onSubmit(){Fe.default.fire({title:"Est\xE1s seguro?",text:"Desea crear una entidad con la informaci\xF3n antes brindada?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(e=>{e.isConfirmed&&(this.editing?this.entitiesService.editEntity(this.entityForm.value).pipe(ee(t=>this.handleSuccessfulResponse(t.success))).subscribe():this.entitiesService.saveEntity(this.entityForm.value).pipe(ee(t=>this.handleSuccessfulResponse(t.success))).subscribe())})}deleteEntity(e){Fe.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n eliminar\xE1 por completo al usuario del sistema.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(t=>{t.isConfirmed&&this.entitiesService.deleteEntityById(e.toString()).subscribe(n=>{n&&this.refreshEntityList()})})}refreshEntityList(){this.entitiesService.getAllEntities().pipe(X(this.destroy$)).subscribe(e=>{e.length!==0?(this.loadingData=!1,this.entitiesList=e):this.loadingData=void 0,this.cdRef.detectChanges()})}putTuEdit(e,t=!1){t?(this.editing=!0,this.entityForm.enable(),Object.entries(e).forEach(n=>{this.entityForm.contains(n[0])&&this.entityForm.controls[n[0]].setValue(n[1])})):(this.editing=!1,Object.entries(e).forEach(n=>{this.entityForm.contains(n[0])&&this.entityForm.controls[n[0]].setValue(n[1])}),this.entityForm.disable())}resetForm(){this.editing=!1,this.entityForm.reset(),this.entityForm.enable()}onChangeDPA(){let e=document.getElementById("dpa-name");this.entityForm.controls.Municipio.setValue(e.value)}handleSuccessfulResponse(e){e&&(this.refreshEntityList(),this.resetForm())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-entities-manager"]],standalone:!0,features:[E],decls:29,vars:7,consts:[[1,"form"],[2,"display","flex","justify-content","space-between"],[2,"gap","10px","display","flex"],[3,"click"],[3,"click","disabled"],[3,"formGroup"],["characterDetect","","name","Codigo","formControlName","Codigo","placeholder","C\xF3digo",1,"onlyNum"],["characterDetect","","name","Nombre","formControlName","Nombre","placeholder","Nombre",1,"nonNum"],["name","Municipio","formControlName","Municipio","id","dpa-name"],["characterDetect","","name","Cuenta","formControlName","Cuenta","placeholder","Cuenta",1,"onlyNum"],["characterDetect","","name","NIT","formControlName","NIT","placeholder","NIT",1,"onlyNum"],["characterDetect","","name","Direccion","formControlName","Direccion","placeholder","Direccion"],["characterDetect","","name","Director","formControlName","Director","placeholder","Director",1,"nonNum"],["characterDetect","","name","Actividad","formControlName","Actividad","placeholder","Actividad",1,"nonNum"],[1,"table-widget"],[3,"value"],[1,"actions"],["title","Ver toda la informaci\xF3n de esta entidad",1,"btn-act","info",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-info-square-rounded"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M12 9h.01"],["d","M11 12h1v4h1"],["d","M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"],["title","Editar la informaci\xF3n de esta entidad",1,"btn-act","edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-edit"],["d","M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"],["d","M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"],["d","M16 5l3 3"],["title","Eliminar del sistema esta entidad",1,"btn-act","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-trash"],["d","M4 7l16 0"],["d","M10 11l0 6"],["d","M14 11l0 6"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(t,n){if(t&1&&(o(0,"h1"),s(1,"Registro de Entidades"),a(),o(2,"span",0)(3,"span",1)(4,"h3"),s(5,"Manejar Informaci\xF3n"),a(),o(6,"span",2)(7,"button",3),u("click",function(){return n.resetForm()}),s(8,"Limpiar Datos"),a(),o(9,"button",4),u("click",function(){return n.onSubmit()}),s(10),a()()(),o(11,"form",5)(12,"span"),m(13,"input",6)(14,"input",7),o(15,"select",8),A(16,yt,2,0),ne(17,"async"),a()(),o(18,"span"),m(19,"input",9)(20,"input",10)(21,"input",11),a(),o(22,"span"),m(23,"input",12)(24,"input",13),a()()(),o(25,"section",14),A(26,wt,16,0,"table")(27,Et,1,0,"shared-loading-data")(28,Ft,1,0,"shared-empty-list"),a()),t&2){let f;c(9),h("disabled",n.entityForm.disabled),c(),D(" ",n.editing===!0?"Editar":"Guardar"," "),c(),h("formGroup",n.entityForm),c(5),j((f=oe(17,5,n.dpaResults$))?16:-1,f),c(10),j(n.loadingData===!1?26:n.loadingData===!0?27:n.loadingData===void 0?28:-1)}},dependencies:[ie,$,P,W,J,H,te,T,O,B,V,Y,Z,F,Ce,pe,L],encapsulation:2});let r=i;return r})();var Me=le(ce());var xe=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/sales`}getAllSales(){return this.http.get(this.url).pipe(C(e=>e.data))}getSaleById(e){return this.http.get(`${this.url}/${e}`).pipe(C(t=>t.data))}saveSale(e){return this.http.post(this.url,e)}editSale(e){return this.http.put(this.url,e)}deleteSaleById(e){return this.http.delete(`${this.url}/${e}`).pipe(C(t=>t.success===!0))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var ye=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/products`}getAllProducts(){return this.http.get(this.url).pipe(C(e=>e.data))}getAllProductsTable(){return this.http.get(`${this.url}/table`).pipe(C(e=>e.data))}getAllProductsSelect(){return this.http.get(`${this.url}/select`).pipe(C(e=>e.data))}saveProducts(e){return this.http.post(this.url,e)}updateProducts(e){return this.http.put(`${this.url}/${e.Id}`,e)}deleteProductById(e){return this.http.delete(`${this.url}/${e}`).pipe(C(t=>t.success===!0))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function kt(r,i){if(r&1&&(o(0,"option",15),s(1),a()),r&2){let l=i.$implicit;q("value",l.Id),c(),g(l.Nombre)}}function Dt(r,i){r&1&&y(0,kt,2,2,"option",15,x),r&2&&M(i)}function It(r,i){if(r&1){let l=R();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td"),s(8),a(),o(9,"td")(10,"div",16)(11,"button",17),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.onRowClick(t.Id))}),S(),o(12,"svg",18),m(13,"path",19)(14,"path",20)(15,"path",21),a()(),N(),o(16,"button",22),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t,!0))}),S(),o(17,"svg",23),m(18,"path",19)(19,"path",24)(20,"path",25),a()(),N(),o(21,"button",26),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.deleteSale(t.Id))}),S(),o(22,"svg",27),m(23,"path",19)(24,"path",28)(25,"path",29)(26,"path",30)(27,"path",31)(28,"path",32),a()()()()()}if(r&2){let l=i.$implicit;c(2),g(l.NombreDependiente),c(2),g(l.Mesa),c(2),g(l.Personas),c(2),g(l.Descuento)}}function Nt(r,i){if(r&1&&(o(0,"table")(1,"caption"),s(2," Comandas activas "),a(),o(3,"thead")(4,"tr")(5,"th"),s(6,"Dependiente"),a(),o(7,"th"),s(8,"N\xFAmero de Mesa"),a(),o(9,"th"),s(10,"Cantidad de Personas"),a(),o(11,"th"),s(12,"Descuento (%)"),a(),o(13,"th"),s(14,"Acciones"),a()()(),o(15,"tbody"),y(16,It,29,4,"tr",null,x),a()()),r&2){let l=v();c(16),M(l.salesList)}}function Tt(r,i){r&1&&m(0,"shared-loading-data")}function Ot(r,i){r&1&&m(0,"shared-empty-list")}var Je=(()=>{let i=class i{constructor(){this.destroy$=new Q,this.loadingData=!0,this.editing=!1,this.salesService=p(xe),this.productService=p(ye),this.dependetService=p(be),this.dpaService=p(Se),this.router=p(Le),this.fb=p(K),this.cdRef=p(z),this.salesList=[],this.salesForm=this.fb.group({Id:["",d.required],Fecha:[Date.now(),d.required],Mesa:["",d.required],Personas:["",d.required],IdDependiente:["",d.required],Descuento:["",d.required],Producto:["",d.required],Observaciones:["",d.required]})}ngOnInit(){this.refreshSaleList(),this.dpaResults$=this.dpaService.getAllDPAS(),this.prodResults$=this.productService.getAllProducts(),this.depResults$=this.dependetService.getAllDependents()}onSubmit(){let e=this.salesForm.get("Mesa")?.value;this.salesList.some(n=>n.Mesa?.toString()===e.toString())?Me.default.fire({title:"Mesa ocupada",text:"Ya existe una comanda con esta mesa",icon:"error"}):Me.default.fire({title:"Est\xE1s seguro?",text:"Desea crear una comanda con la informaci\xF3n antes brindada?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(n=>{n.isConfirmed&&(this.editing?this.salesService.editSale(this.salesForm.value).pipe(ee(f=>this.handleSuccessfulResponse(f.success))).subscribe():this.salesService.saveSale(this.salesForm.value).pipe(ee(f=>this.handleSuccessfulResponse(f.success))).subscribe())})}deleteSale(e){Me.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n eliminar\xE1 por completo al usuario del sistema.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(t=>{t.isConfirmed&&this.salesService.deleteSaleById(e.toString()).subscribe(n=>{n&&this.refreshSaleList()})})}refreshSaleList(){this.salesService.getAllSales().pipe(X(this.destroy$)).subscribe(e=>{e.length!==0?(this.loadingData=!1,this.salesList=e):this.loadingData=void 0,this.cdRef.detectChanges()})}putTuEdit(e,t=!1){t?(this.editing=!0,this.salesForm.enable(),Object.entries(e).forEach(n=>{this.salesForm.contains(n[0])&&this.salesForm.controls[n[0]].setValue(n[1])})):(this.editing=!1,Object.entries(e).forEach(n=>{this.salesForm.contains(n[0])&&this.salesForm.controls[n[0]].setValue(n[1])}),this.salesForm.disable())}onRowClick(e){this.router.navigate(["/dashboard/sale",e])}resetForm(){this.editing=!1,this.salesForm.reset(),this.salesForm.enable()}handleSuccessfulResponse(e){e&&(this.refreshSaleList(),this.resetForm())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-sales"]],standalone:!0,features:[E],decls:45,vars:7,consts:[[1,"main-article"],[1,"form"],[2,"display","flex","justify-content","space-between"],[2,"gap","10px","display","flex"],[1,"clean-form",3,"click"],[1,"save-form",3,"click","disabled"],[3,"formGroup"],["for",""],["id","datePicker","type","date","name","Fecha","formControlName","Fecha","placeholder","Fecha"],["characterDetect","","name","Mesa","formControlName","Mesa","placeholder","Mesa 4",1,"olyNum"],["characterDetect","","name","Personas","formControlName","Personas","placeholder","3 personas",1,"olyNum"],["name","IdDependiente","formControlName","IdDependiente"],["characterDetect","","name","Descuento","formControlName","Descuento","placeholder","Descuento aplicado",1,"onlyNum"],["characterDetect","","name","Observaciones","formControlName","Observaciones","placeholder","Comanda con observaciones",1,"olyNum"],[1,"table-widget"],[3,"value"],[1,"actions"],[1,"btn-act","edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-eye"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"],["d","M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"],[1,"btn-act","close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-square-rounded-check"],["d","M9 12l2 2l4 -4"],["d","M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"],[1,"btn-act","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-trash"],["d","M4 7l16 0"],["d","M10 11l0 6"],["d","M14 11l0 6"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(t,n){if(t&1&&(o(0,"h1"),s(1,"Emisi\xF3n de Comandas"),a(),o(2,"article",0)(3,"span",1)(4,"span",2)(5,"h3"),s(6,"Manejar Informaci\xF3n"),a(),o(7,"span",3)(8,"button",4),u("click",function(){return n.resetForm()}),s(9,"Limpiar Datos"),a(),o(10,"button",5),u("click",function(){return n.onSubmit()}),s(11),a()()(),o(12,"form",6)(13,"span")(14,"div")(15,"label",7),s(16,"Fecha:"),a(),m(17,"input",8),a(),o(18,"div")(19,"label",7),s(20,"Numero de Mesa:"),a(),m(21,"input",9),a(),o(22,"div")(23,"label",7),s(24,"Cantidad de Personas:"),a(),m(25,"input",10),a()(),o(26,"span")(27,"div")(28,"label",7),s(29,"Dependiente:"),a(),o(30,"select",11),A(31,Dt,2,0),ne(32,"async"),a()(),o(33,"div")(34,"label",7),s(35,"Descuento:"),a(),m(36,"input",12),a(),o(37,"div")(38,"label",7),s(39,"Observaciones:"),a(),m(40,"input",13),a()()()(),o(41,"section",14),A(42,Nt,18,0,"table")(43,Tt,1,0,"shared-loading-data")(44,Ot,1,0,"shared-empty-list"),a()()),t&2){let f;c(10),h("disabled",n.salesForm.disabled),c(),D(" ",n.editing===!0?"Editar":"Guardar"," "),c(),h("formGroup",n.salesForm),c(19),j((f=oe(32,5,n.depResults$))?31:-1,f),c(11),j(n.loadingData===!1?42:n.loadingData===!0?43:n.loadingData===void 0?44:-1)}},dependencies:[ie,$,P,W,J,H,te,T,O,B,V,Y,Z,F,Ce,L],styles:[".main-article[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.table-list[_ngcontent-%COMP%]{width:300px;display:flex;flex-direction:column;padding:30px 15px}.table-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.table-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eee}"],changeDetection:0});let r=i;return r})();var we=le(ce());var Ke=(()=>{let i=class i{constructor(){this.title="",this.class="",this.name=""}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["shared-input"]],inputs:{title:"title",class:"class",name:"name",genericForm:"genericForm"},standalone:!0,features:[E],decls:5,vars:8,consts:[[3,"formGroup"],[3,"for"],["characterDetect","",3,"name","formControlName","id"]],template:function(t,n){t&1&&(o(0,"form",0)(1,"div")(2,"label",1),s(3),a(),m(4,"input",2),a()()),t&2&&(h("formGroup",n.genericForm),c(2),h("for",n.name.toLocaleLowerCase()),c(),g(n.title),c(),ae(n.class),h("name",n.name)("formControlName",n.name)("id",n.name.toLocaleLowerCase()))},dependencies:[$,P,H,T,O,B,V,L,ie,F],encapsulation:2,changeDetection:0});let r=i;return r})();function Pt(r,i){if(r&1&&(o(0,"option",3),s(1),ne(2,"titlecase"),a()),r&2){let l=i.$implicit;q("value",l.Id),c(),D(" ",oe(2,2,l.Nombre)," ")}}function Bt(r,i){if(r&1&&y(0,Pt,3,4,"option",3,x),r&2){let l=v();M(l.genericList)}}var Qe=(()=>{let i=class i{constructor(){this.title="",this.name="",this.genericList=[]}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["shared-select"]],inputs:{title:"title",name:"name",genericList:"genericList",genericForm:"genericForm"},standalone:!0,features:[E],decls:6,vars:5,consts:[[3,"formGroup"],["for","select-clasification"],["id","select-clasification",3,"name","formControlName"],[3,"value"]],template:function(t,n){t&1&&(o(0,"form",0)(1,"div")(2,"label",1),s(3),a(),o(4,"select",2),A(5,Bt,2,0),a()()()),t&2&&(h("formGroup",n.genericForm),c(3),g(n.title),c(),h("name",n.name)("formControlName",n.name),c(),j(n.genericList?5:-1))},dependencies:[$,P,W,J,te,T,O,B,V,L,F,pe],encapsulation:2,changeDetection:0});let r=i;return r})();function Vt(r,i){if(r&1&&(o(0,"option",14),s(1),ne(2,"titlecase"),a()),r&2){let l=i.$implicit;q("value",l.Id),c(),D(" ",oe(2,2,l.Nombre)," ")}}function Lt(r,i){if(r&1&&y(0,Vt,3,4,"option",14,x),r&2){let l=v(2);M(l.conceptoResults)}}function $t(r,i){if(r&1){let l=R();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td"),s(8),a(),o(9,"td"),s(10),a(),o(11,"td")(12,"div",15)(13,"button",16),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t))}),S(),o(14,"svg",17),m(15,"path",18)(16,"path",19)(17,"path",20)(18,"path",21),a()(),N(),o(19,"button",22),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.putTuEdit(t,!0))}),S(),o(20,"svg",23),m(21,"path",18)(22,"path",24)(23,"path",25)(24,"path",26),a()(),N(),o(25,"button",27),u("click",function(){let t=_(l).$implicit,n=v(2);return b(n.deleteSale(t.Id))}),S(),o(26,"svg",28),m(27,"path",18)(28,"path",29)(29,"path",30)(30,"path",31)(31,"path",32)(32,"path",33),a()()()()()}if(r&2){let l=i.$implicit;c(2),g(l.Concepto),c(2),g(l.Clasificacion),c(2),g(l.Nombre),c(2),g(l.Medida),c(2),g(l.Precio)}}function At(r,i){if(r&1){let l=R();o(0,"table")(1,"caption"),s(2," Todos los Productos "),o(3,"form",10)(4,"span")(5,"div")(6,"label",11),s(7,"Busqueda por Concepto:"),a(),o(8,"select",12),u("change",function(){_(l);let t=v();return b(t.filterProduct())}),o(9,"option",13),s(10,"Todos"),a(),A(11,Lt,2,0),a()()()()(),o(12,"thead")(13,"tr")(14,"th"),s(15,"Concepto"),a(),o(16,"th"),s(17,"Clasificacion"),a(),o(18,"th"),s(19,"Nombre"),a(),o(20,"th"),s(21,"U/M"),a(),o(22,"th"),s(23,"Precio"),a(),o(24,"th"),s(25,"Acciones"),a()()(),o(26,"tbody"),y(27,$t,33,5,"tr",null,x),a()()}if(r&2){let l=v();c(3),h("formGroup",l.productFormFilter),c(8),j(l.clasificationResults?11:-1),c(16),M(l.productsList)}}function jt(r,i){r&1&&m(0,"shared-loading-data")}function Rt(r,i){r&1&&m(0,"shared-empty-list")}var Xe=(()=>{let i=class i{constructor(){this.destroy$=new Q,this.loadingData=!0,this.editing=!1,this.cdRef=p(z),this.fb=p(K),this.productService=p(ye),this.productsList=[],this.productsListSave=[],this.conceptoResults=[],this.storeResults=[],this.clasificationResults=[],this.clasificationResultsFilter=[],this.meansureResults=[],this.productForm=this.fb.group({Id:[""],IdClasificacion:["",[d.required,d.minLength(1)]],Codigo:["",[d.required,d.min(1)]],Nombre:["",[d.required,d.minLength(1)]],IdConcepto:["",[d.required,d.minLength(1)]],IdAlmacen:["",[d.required,d.minLength(1)]],IdUm:["",[d.required,d.minLength(1)]],Precio:["",[d.required,d.minLength(1)]],FactorConversion:[1,[d.required,d.min(1)]],Fecha:[new Date,d.required]}),this.productFormFilter=this.fb.group({IdClasificacion:[""],IdConcepto:[""]}),this.authStatusChangedEffect=Pe(()=>Ee(this,null,function*(){this.refreshSaleList(),this.productSelectResults$=this.productService.getAllProductsSelect(),this.productSelectResults$.subscribe(e=>{this.clasificationResults=e[0],this.clasificationResultsFilter=e[0],this.conceptoResults=e[1],this.storeResults=e[2],this.meansureResults=e[3],this.cdRef.detectChanges()},e=>{console.error("Error al obtener los productos",e)}),this.cdRef.detectChanges()}))}onSubmit(){return Ee(this,null,function*(){this.productForm.invalid?yield we.default.fire("Error","Complete todos los campos","error"):we.default.fire({title:"Est\xE1s seguro?",text:"Desea crear un Producto con la informaci\xF3n antes brindada?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(e=>{e.isConfirmed&&(this.editing?this.productService.updateProducts(this.productForm.value).pipe(ee(t=>this.handleSuccessfulResponse(t.success))).subscribe():this.productService.saveProducts(this.productForm.value).pipe(ee(t=>this.handleSuccessfulResponse(t.success))).subscribe())})})}deleteSale(e){we.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n eliminar\xE1 por completo al usuario del sistema.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(t=>{t.isConfirmed&&this.productService.deleteProductById(e.toString()).subscribe(n=>{n&&this.refreshSaleList()})})}refreshSaleList(){this.productService.getAllProductsTable().pipe(X(this.destroy$)).subscribe(e=>{if(e.length!==0){this.productsList=e,this.productsListSave=this.productsList;let t="OTROS                                             ";this.productsList.sort((n,f)=>n.Concepto===t&&f.Concepto!==t?1:n.Concepto!==t&&f.Concepto===t||n.Concepto<f.Concepto?-1:n.Concepto>f.Concepto?1:0)}else this.loadingData=void 0;this.loadingData=!1,this.cdRef.detectChanges()})}putTuEdit(e,t=!1){t?(this.editing=!0,this.productForm.enable(),Object.entries(e).forEach(n=>{this.productForm.contains(n[0])&&this.productForm.controls[n[0]].setValue(n[1])})):(this.editing=!1,Object.entries(e).forEach(n=>{this.productForm.contains(n[0])&&this.productForm.controls[n[0]].setValue(n[1])}),this.productForm.disable())}resetForm(){this.editing=!1,this.productForm.reset(),this.productForm.enable()}handleSuccessfulResponse(e){e&&(this.refreshSaleList(),this.resetForm())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}filterProduct(e=!1){this.productsList=this.productsListSave,e&&(this.productFormFilter.controls.IdConcepto.setValue(""),this.cdRef.detectChanges());let{IdConcepto:t}=this.productFormFilter.value;t!=""&&t!="all"&&(this.productsList=this.productsList.filter(n=>n.IdConcepto===t)),this.cdRef.detectChanges()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-product"]],standalone:!0,features:[E],decls:28,vars:44,consts:[[1,"form"],[2,"display","flex","justify-content","space-between"],[2,"gap","10px","display","flex"],[1,"clean-form",3,"click"],[1,"save-form",3,"click","disabled"],[1,"form-items"],[3,"title","name","genericList","genericForm"],[3,"title","name","genericForm"],[3,"title","genericList","name","genericForm"],[1,"table-widget"],[3,"formGroup"],["for","select-concept"],["name","IdConcepto","formControlName","IdConcepto","id","select-concept",2,"background-color","#d7e1fb",3,"change"],["value","all"],[3,"value"],[1,"actions"],["title","Ver toda la informaci\xF3n de esta entidad",1,"btn-act","info",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-info-square-rounded"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M12 9h.01"],["d","M11 12h1v4h1"],["d","M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"],["title","Editar la informaci\xF3n de esta entidad",1,"btn-act","edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-edit"],["d","M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"],["d","M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"],["d","M16 5l3 3"],["title","Eliminar del sistema esta entidad",1,"btn-act","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-trash"],["d","M4 7l16 0"],["d","M10 11l0 6"],["d","M14 11l0 6"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(t,n){t&1&&(o(0,"h1"),s(1,"Productos"),a(),o(2,"span",0)(3,"span",1)(4,"h3"),s(5,"Manejar Informaci\xF3n"),a(),o(6,"span",2)(7,"button",3),u("click",function(){return n.resetForm()}),s(8,"Limpiar Datos"),a(),o(9,"button",4),u("click",function(){return n.onSubmit()}),s(10),a()()(),o(11,"span",5)(12,"span"),m(13,"shared-select",6)(14,"shared-input",7)(15,"shared-input",7),a(),o(16,"span"),m(17,"shared-select",8)(18,"shared-select",8)(19,"shared-select",8)(20,"shared-input",7),a(),o(21,"span"),m(22,"shared-input",7)(23,"shared-input",7),a()()(),o(24,"section",9),A(25,At,29,2,"table")(26,jt,1,0,"shared-loading-data")(27,Rt,1,0,"shared-empty-list"),a()),t&2&&(c(9),h("disabled",n.productForm.disabled),c(),D(" ",n.editing===!0?"Editar":"Guardar"," "),c(3),h("title","Clasificacion:")("name","IdClasificacion")("genericList",n.clasificationResults)("genericForm",n.productForm),c(),ae("onlyNum"),h("title","Codigo:")("name","Codigo")("genericForm",n.productForm),c(),ae("onNum"),h("title","Nombre:")("name","Nombre")("genericForm",n.productForm),c(2),h("title","Concepto:")("genericList",n.conceptoResults)("name","IdConcepto")("genericForm",n.productForm),c(),h("title","Almacen:")("genericList",n.storeResults)("name","IdAlmacen")("genericForm",n.productForm),c(),h("title","U/M:")("genericList",n.meansureResults)("name","IdUm")("genericForm",n.productForm),c(),ae("onlyNum"),h("title","Precio:")("name","Precio")("genericForm",n.productForm),c(2),ae("onlyNum"),h("title","Fecha Apertura:")("name","Fecha")("genericForm",n.productForm),c(),ae("onlyNum"),h("title","Factor Conversion:")("name","FactorConversion")("genericForm",n.productForm),c(2),j(n.loadingData===!1?25:n.loadingData===!0?26:n.loadingData===void 0?27:-1))},dependencies:[F,pe,Z,L,P,W,J,te,T,O,Y,$,B,V,Ke,Qe],styles:['.filter[_ngcontent-%COMP%]{display:flex;flex-direction:row}.btn-reload[_ngcontent-%COMP%]{height:30px}@font-face{font-family:OpenSans;src:url("./media/OpenSans-VariableFont-R5QF7XJK.ttf") format("truetype");font-display:swap}*[_ngcontent-%COMP%]{font-family:OpenSans;margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fafafd}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:0 10px;border:none;border-radius:5px;font-size:14px}input[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:focus{border:1px solid #09f;outline:none}input[_ngcontent-%COMP%]::placeholder{color:#9ea2a6;font-size:14px}h1[_ngcontent-%COMP%]{color:#0f0542;font-size:x-large}h3[_ngcontent-%COMP%]{color:#6d6880;font-weight:400}label[_ngcontent-%COMP%]{font-size:15px;opacity:.5}.form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;background-color:#d7e1fb;border-radius:10px;padding:20px;gap:10px;box-shadow:0 0 3px #00000080;margin:20px 0}.save-form[_ngcontent-%COMP%]{color:#264fbb;background-color:#fff;padding:5px 15px;border:none;border-radius:5px;cursor:pointer;box-shadow:0 0 3px #0000004d;font-size:16px}.form-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:10px}.form-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;gap:10px}.form-items[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:30px;width:100%}shared-select[_ngcontent-%COMP%], shared-input[_ngcontent-%COMP%]{width:100%}.table-widget[_ngcontent-%COMP%]{margin-top:30px;border:none;text-align:left;overflow-x:auto;height:400px}.table-widget[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-widget[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.12rem;font-weight:700;text-align:left;color:#3c3c3c;margin:.5rem 0}.table-widget[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-widget[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem 1rem;vertical-align:middle}.table-widget[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.875rem;padding-top:1.25rem;padding-bottom:1.25rem}.table-widget[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{margin-top:1rem}.table-widget[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#8999b0}.table-widget[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%], .table-widget[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{color:#000}.table-widget[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px}.table-widget[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px}.table-widget[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease-in-out}.table-widget[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#e2ecff}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-act[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;color:#8999b0;padding:5px;border:none;border-radius:5px;background-color:transparent}.btn-act.edit[_ngcontent-%COMP%]:hover{background-color:#219653;color:#fff!important}.btn-act.delete[_ngcontent-%COMP%]:hover{background-color:#f85653;color:#fff!important}.btn-act.info[_ngcontent-%COMP%]:hover{background-color:#1c7ead;color:#fff!important}.btn-act.change[_ngcontent-%COMP%]:hover{background-color:#5fb0fb;color:#fff!important}.active[_ngcontent-%COMP%], .inactive[_ngcontent-%COMP%]{border-radius:10px;padding:5px 15px;color:#fff}.active[_ngcontent-%COMP%]{background-color:#219653}.inactive[_ngcontent-%COMP%]{background-color:#f85653}']});let r=i;return r})();var Ye=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/ofertas`}getAllOfertas(){return this.http.get(this.url).pipe(C(e=>e.data))}getOfertaById(e){return this.http.get(`${this.url}/${e}`).pipe(C(t=>t.data))}saveOferta(e){return this.http.post(this.url,e)}editOferta(e){return this.http.put(this.url,e)}deleteOfertaById(e){return this.http.delete(`${this.url}/${e}`).pipe(C(t=>t.success===!0))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var Ze=(()=>{let i=class i{constructor(){this.http=p(G),this.url=`${k.baseUrl}/cdetalles`}getAllCDetalles(){return this.http.get(this.url).pipe(C(e=>e.data))}getComandaDetalleByComanda(e){return this.http.get(`${this.url}/cdetalle/${e}`).pipe(C(t=>t.data))}getCDetalleById(e){return this.http.get(`${this.url}/${e}`).pipe(C(t=>t.data))}saveCDetalle(e){return this.http.post(this.url,e).pipe(C(t=>t.success))}editCDetalle(e){return this.http.put(this.url,e).pipe(C(t=>t.success))}deleteCDetalleById(e){return this.http.delete(`${this.url}/${e}`).pipe(C(t=>t.success))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var et=le(ce());function Ut(r,i){if(r&1&&(o(0,"option",4),s(1),a()),r&2){let l=i.$implicit;q("value",l.Id),c(),g(l.Nombre)}}function Gt(r,i){if(r&1){let l=R();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td"),s(8),a(),o(9,"td")(10,"button",8),u("click",function(){let t=_(l).$implicit,n=v();return b(n.deleteSale(t.Id))}),S(),o(11,"svg",9),m(12,"path",10)(13,"path",11)(14,"path",12)(15,"path",13)(16,"path",14)(17,"path",15),a()()()()}if(r&2){let l=i.$implicit;c(2),g(l.Nombre),c(2),g(l.Cantidad),c(2),g(l.Precio),c(2),g(l.Importe)}}var tt=(()=>{let i=class i{constructor(){this.cdRef=p(z),this.fb=p(K),this.saleService=p(xe),this.cdService=p(Ze),this.activateRoute=p(Be),this.ofertaService=p(Ye),this.ofertaslist=[],this.salesForm=this.fb.group({IdComanda:["",d.required],IdOferta:["",d.required],Cantidad:["",d.required],Importe:["",d.required],ImporteDescuento:["",d.required],IdUsuario:["",d.required]})}ngOnInit(){this.activateRoute.params.subscribe(e=>{this.saleService.getSaleById(e.id).subscribe(t=>{this.sale=t[0],this.refreshList(this.sale.Id)})}),this.ofertaService.getAllOfertas().subscribe(e=>{this.ofertaslist=e,this.cdRef.detectChanges()})}refreshList(e){this.cdService.getComandaDetalleByComanda(e).subscribe(t=>{this.cdetalles=t,this.cdRef.detectChanges()})}onSubmit(){let e=this.salesForm.controls.IdOferta.value,t=this.salesForm.controls.Cantidad.value,n=this.ofertaslist.find(re=>re.Id===e)?.Precio,f=t*n*(this.sale.Descuento/100);this.salesForm.controls.Importe.setValue(t*n),this.salesForm.controls.ImporteDescuento.setValue(f),this.salesForm.controls.IdComanda.setValue(this.sale.Id),this.salesForm.controls.IdUsuario.setValue(this.sale.IdUsuario),this.cdService.saveCDetalle(this.salesForm.value).subscribe(re=>{re&&this.refreshList(this.sale.Id)})}onChange(){let e=document.getElementById("IdOferta");this.salesForm.controls.IdOferta.setValue(e.value)}deleteSale(e){et.default.fire({title:"Est\xE1s seguro?",text:"\xC9sta acci\xF3n eliminar\xE1 por completo al usuario del sistema.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar"}).then(t=>{t.isConfirmed&&this.cdService.deleteCDetalleById(e).subscribe(n=>{n&&this.refreshList(this.sale.Id)})})}getTotal(){return this.cdetalles.reduce((e,t)=>e+t.Importe,0)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-sale-detail"]],standalone:!0,features:[E],decls:34,vars:1,consts:[[1,"form"],["action","",3,"formGroup"],["for",""],["value","","id","IdOferta",3,"change"],[3,"value"],["characterDetect","","formControlName","Cantidad","name","Cantidad","placeholder","Cantidad del producto",1,"onlyNum"],[1,"save-form",3,"click"],[1,"table-widget"],[1,"btn-act","delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-trash"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M4 7l16 0"],["d","M10 11l0 6"],["d","M14 11l0 6"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(t,n){t&1&&(o(0,"span",0)(1,"form",1)(2,"span")(3,"div")(4,"label",2),s(5,"Selecciona el Producto:"),a(),o(6,"select",3),u("change",function(){return n.onChange()}),y(7,Ut,2,2,"option",4,x),a()(),o(9,"div")(10,"label",2),s(11,"Cantidad del Productos:"),a(),m(12,"input",5),a(),o(13,"button",6),u("click",function(){return n.onSubmit()}),s(14,"Guardar"),a()()()(),o(15,"section",7)(16,"table")(17,"caption"),s(18," Ofertas de esta Comanda "),a(),o(19,"thead")(20,"tr")(21,"th"),s(22,"Producto"),a(),o(23,"th"),s(24,"Cantidad"),a(),o(25,"th"),s(26,"Precio"),a(),o(27,"th"),s(28,"Importe"),a(),o(29,"th"),s(30,"Acciones"),a()()(),o(31,"tbody"),y(32,Gt,18,4,"tr",null,x),a()()()),t&2&&(c(),h("formGroup",n.salesForm),c(6),M(n.ofertaslist),c(25),M(n.cdetalles))},dependencies:[F,L,P,W,J,H,T,O,$,B,V],changeDetection:0});let r=i;return r})();var Qo=[{path:"",component:Re,children:[{path:"users",component:Ge},{path:"dependents",component:qe},{path:"workers",component:He},{path:"entities",component:We},{path:"sales",component:Je},{path:"products",component:Xe},{path:"sale/:id",component:tt},{path:"**",redirectTo:"users"}]}];export{Qo as DASHBOARD_ROUTES};
